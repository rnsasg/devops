# Reply modification
The HCM supports modifying and customizing a response that gets returned by Envoy. Note that this doesn’t work for responses returned by upstream.

Local replies are responses generated by Envoy. Local reply works by defining a set of mappers that allow filtering and changing responses. For example, Envoy sends a local HTTP 404 if there aren’t any routes or upstream clusters defined.

Each mapper must have a defined filter that compares the request properties with specified values (for example, if the status code equals 403). We can choose from multiple filters to match on status code, duration, headers, response flags, and more.

In addition to the filter field, the mapper has fields for a new status code (status_code), body (body and body_format_override), and headers (headers_to_add). For example, we can have a filter that matches the request status code 403 and then change the status code to 500, update the body, or add headers.

Here’s an example that rewrites an HTTP 503 response to HTTP 401. Note that this refers to the status code returned by Envoy. Envoy will return a 503 if the upstream doesn’t exist, for example.

```yaml
...
- name: envoy.filters.network.http_connection_manager
  typed_config:
    "@type": type.googleapis.com/envoy.extensions.filters.network.http_connection_manager.v3.HttpConnectionManager
    mappers:
    - filter:
        status_code_filter:
          comparison:
            op: EQ
            value:
              default_value: 503
      headers_to_add:
        - header:
            key: "service"
            value: "unavailable"
          append: false
      status_code: 401
      body:
        inline_string: "Not allowed"
```